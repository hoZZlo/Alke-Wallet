<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber-Wallet</title>
    <link rel="icon" type="image/jpeg" href="images/offline.jpg">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant:ital,wght@0,300..700;1,300..700&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Enviar dinero | Cyber-Wallet</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>

<body>

<h1 class="principal">Enviar dinero</h1>

<div class="saldo-box">
  <input id="destinatario" class="form-control mb-2" placeholder="Nombre del destinatario">
  <input id="monto" type="number" class="form-control mb-3" placeholder="Monto a enviar">

  <button id="sendBtn" class="btn btn-cyber w-100">Enviar dinero</button>
</div>

<div class="text-center mt-3">
  <img src="images/cash.gif" width="150">
</div>

<script src="script.js"></script>

<script>
document.getElementById("sendBtn").addEventListener("click", () => {

  const nombre = document.getElementById("destinatario").value.trim();
  const monto = Number(document.getElementById("monto").value);
  let saldo = Number(localStorage.getItem("saldo"));

  // script
  if (monto > saldo) {
    alert("Saldo insuficiente");
    return;
  }

  // saldo que se actualiza
  saldo -= monto;
  localStorage.setItem("saldo", saldo);

  // se guarda el movimiento
  let movs = JSON.parse(localStorage.getItem("movimientos"));
  movs.push(`Env√≠o a ${nombre}: -$${monto}`);
  localStorage.setItem("movimientos", JSON.stringify(movs));

  alert("Dinero enviado correctamente");
  location.href = "menu.html";
});
</script>

</body>
</html>
